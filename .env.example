# E-Commerce Data Warehouse Environment Configuration
# Copy this file to .env and update the values as needed

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database Settings
DB_HOST=postgres
DB_PORT=5432
DB_NAME=ecommerce_dw
DB_USER=postgres
DB_PASSWORD=postgres

# Database Connection Pool Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Cache Settings
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Cache Configuration
CACHE_TTL=3600
CACHE_ENABLED=true

# =============================================================================
# ETL PIPELINE CONFIGURATION
# =============================================================================

# ETL Processing Settings
ETL_BATCH_SIZE=1000
ETL_MAX_RETRIES=3
ETL_RETRY_DELAY=5
ETL_TIMEOUT=1800

# Data Quality Thresholds
MAX_NULL_PERCENTAGE=5.0
MAX_DUPLICATE_PERCENTAGE=1.0
MIN_ROW_COUNT=1

# =============================================================================
# AIRFLOW CONFIGURATION
# =============================================================================

# Airflow Core Settings
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=true
AIRFLOW__CORE__LOAD_EXAMPLES=false
AIRFLOW__CORE__MAX_ACTIVE_RUNS_PER_DAG=1

# Airflow Database Connection
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://postgres:postgres@postgres:5432/airflow

# Airflow Security
AIRFLOW__CORE__FERNET_KEY=your-fernet-key-here-32-chars-long
AIRFLOW__WEBSERVER__SECRET_KEY=your-secret-key-here

# Airflow Webserver
AIRFLOW__WEBSERVER__EXPOSE_CONFIG=true
AIRFLOW__WEBSERVER__RBAC=true

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Flask Application Settings
FLASK_ENV=production
FLASK_DEBUG=false

# Monitoring Dashboard Settings
DASHBOARD_REFRESH_INTERVAL=30
METRICS_RETENTION_DAYS=30

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Levels (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO
ETL_LOG_LEVEL=INFO
AIRFLOW_LOG_LEVEL=INFO

# Log File Settings
LOG_FILE_MAX_SIZE=10MB
LOG_FILE_BACKUP_COUNT=5

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Memory Settings
PYTHON_MAX_MEMORY=2GB
PANDAS_MAX_MEMORY=1GB

# Processing Settings
PARALLEL_WORKERS=4
CHUNK_SIZE=10000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# API Security (if applicable)
API_KEY=your-api-key-here
JWT_SECRET=your-jwt-secret-here

# Database Security
DB_SSL_MODE=prefer
DB_SSL_CERT=
DB_SSL_KEY=
DB_SSL_ROOT_CERT=

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development Mode Settings
DEBUG_MODE=false
DEVELOPMENT_MODE=false

# Testing Settings
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/test_ecommerce_dw
RUN_TESTS_ON_STARTUP=false

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Container Resource Limits
POSTGRES_MAX_MEMORY=1GB
REDIS_MAX_MEMORY=512MB
ETL_MAX_MEMORY=1GB
AIRFLOW_MAX_MEMORY=2GB
MONITORING_MAX_MEMORY=512MB

# Container Health Check Settings
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# =============================================================================
# DATA CONFIGURATION
# =============================================================================

# Data File Paths
DATA_DIR=/app/data
SQL_DIR=/app/sql
LOGS_DIR=/app/logs

# Data Processing Settings
DATE_RANGE_START=2023-01-01
DATE_RANGE_END=2024-12-31

# Data Validation Settings
ENABLE_DATA_PROFILING=true
ENABLE_SCHEMA_VALIDATION=true
ENABLE_BUSINESS_RULE_VALIDATION=true

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================

# Email Notifications (optional)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_USE_TLS=true

# Notification Settings
ENABLE_EMAIL_NOTIFICATIONS=false
NOTIFICATION_EMAIL=admin@example.com
ALERT_ON_FAILURE=true
ALERT_ON_SUCCESS=false

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Database Backup Settings
ENABLE_AUTO_BACKUP=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_LOCATION=/backups

# =============================================================================
# NOTES
# =============================================================================

# 1. Copy this file to .env before running docker-compose
# 2. Update passwords and secrets for production use
# 3. Adjust memory limits based on your system resources
# 4. Enable notifications and backups for production deployments
# 5. Review security settings before production deployment